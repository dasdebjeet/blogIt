<div class="dashboard_blog_wrapper">
    <div class="dashboard_blog_container flexc">

        <div class="dashboard_blog_sec1">
            <div class="dashboard_blog_con dashboard_blog_published">
                <div class="dashboard_blog_title">Published</div>
                <div class="dashboard_blog_published_blog_prev_con">

                    <!-- <div class="dashboard_blog_published_blog_prev">
                        <div class="published_blog_prev_image_con flexc">
                            <div class="published_blog_prev_thumbnail_con">
                                <img src="./assests/blog_main_img/mainBlog_Img_6bc82dad7a408d9098354590090aa2b001ae341f.jpg" class="published_blog_prev_thumbnail_img">
                            </div>
                            <div class="published_blog_prev_miniImg_con flexc">
                                <img src="./assests/blog_content_mini_img/miniBlog_Img_10aca3f16459eb1f7fc4ebb5911f1bbe05b04cb3.jpg" class="published_blog_prev_mini_img">
                                <img src="./assests/blog_content_mini_img/miniBlog_Img_485bbb39b568989bdbb1fe18cf98443160bdf2c9.jpg" class="published_blog_prev_mini_img">
                            </div>
                        </div>

                        <div class="published_blog_prev_content">
                            <div class="published_blog_prev_content_title"> Bonuses for New Hao's Special Works Race Series </div>
                            <div class="published_blog_prev_content_date"> 19 March 2021 </div>
                            <div class="published_blog_prev_content_text"> Grand Theft Auto Online weekly events are bigger than ever with the game's arrival on PlayStation ... </div>
                        </div>

                        <div class="published_blog_prev_toolbar flexc">
                            <div class="published_blog_prev_tool flexc"><i class="fal fa-pencil-alt"></i></div>
                            <div class="published_blog_prev_tool flexc"><i class="fas fa-eye"></i></div>
                            <div class="published_blog_prev_tool flexc"><i class="fas fa-chart-area"></i></div>
                            <div class="published_blog_prev_tool flexc"><i class="fas fa-trash"></i></div>
                            <div class="published_blog_prev_tool flexc"><i class="fal fa-ellipsis-v-alt"></i></div>
                        </div>
                    </div> -->


                </div>
            </div>
        </div>


        <div class="dashboard_blog_sec2 flexc">
            <div class="dashboard_blog_con dashboard_blog_draft">
                <div class="dashboard_blog_title">Draft</div>


                <div class="dashboard_blog_draft_blog_prev_conWrap">
                    <div class="dashboard_blog_draft_blog_prev_con owl-carousel flexc">

                        <!-- <div class="dashboard_blog_draft_blog_prev flexc">
                            <div class="dashboard_blog_draft_blog_prev_wrap flexc">
                                <div class="dashboard_blog_draft_blog_prev_thumbnail_con flexc">
                                    <img src="./assests/blog_main_img/mainBlog_Img_6bc82dad7a408d9098354590090aa2b001ae341f.jpg" class="draft_blog_prev_thumbnail_img">
                                </div>
                                <div class="draft_blog_prev_content">

                                    <div class="draft_blog_prev_title">Bonuses for New Hao's Special Works Race Series</div>
                                    <div class="draft_blog_prev_content_date"> 19 March 2021 </div>
                                    <div class="draft_blog_prev_content_text"> Grand Theft Auto Online weekly events are bigger than ever ... </div>
                                </div>
                            </div>


                            <div class="draft_blog_prev_toolbar flexc">
                                <div class="draft_blog_prev_tool flexc"><i class="fal fa-pencil-alt"></i></div>
                                <div class="draft_blog_prev_tool flexc"><i class="fas fa-eye"></i></div>
                                <div class="draft_blog_prev_tool flexc"><i class="fas fa-trash"></i></div>
                            </div>
                        </div> -->

                    </div>
                </div>

            </div>


            <div class="dashboard_blog_con dashboard_blog_trash">
                <div class="dashboard_blog_title">Trash</div>

                <div class="dashboard_blog_trash_blog_prev_conWrap">
                    <div class="dashboard_blog_trash_blog_prev_con owl-carousel flexc">

                        <!-- <div class="dashboard_blog_trash_blog_prev flexc">
                            <div class="dashboard_blog_trash_blog_prev_wrap flexc">
                                <div class="dashboard_blog_trash_blog_prev_thumbnail_con flexc">
                                    <img src="./assests/blog_main_img/mainBlog_Img_6bc82dad7a408d9098354590090aa2b001ae341f.jpg" class="trash_blog_prev_thumbnail_img">
                                </div>
                                <div class="trash_blog_prev_content">
                                    <div class="trash_blog_prev_title">Bonuses for New Hao's Special Works Race Series</div>
                                    <div class="trash_blog_prev_content_date"> 19 March 2021 </div>
                                    <div class="trash_blog_prev_content_text"> Grand Theft Auto Online weekly events are bigger than ever ... </div>
                                </div>
                            </div>


                            <div class="trash_blog_prev_toolbar flexc">
                                <div class="trash_blog_prev_tool flexc"><i class='bx bx-revision'></i></div>
                                <div class="trash_blog_prev_tool flexc"><i class="fas fa-eye"></i></div>
                                <div class="trash_blog_prev_tool flexc"><i class="fas fa-trash"></i></div>
                            </div>
                        </div> -->

                    </div>
                </div>


            </div>
        </div>


        <div class="dashboard_blog_sec3 flexc">
            <div class="dashboard_blog_con dashboard_blog_subFreveiw">
                <div class="dashboard_blog_title">Submited for reveiw</div>


                <div class="dashboard_blog_subFreveiw_blog_prev_con">

                    <!-- <div class="dashboard_blog_subFreveiw_blog_prev">
                        <div class="subFreveiw_blog_prev_image_con flexc">
                            <div class="subFreveiw_blog_prev_thumbnail_con">
                                <img src="./assests/blog_main_img/mainBlog_Img_6bc82dad7a408d9098354590090aa2b001ae341f.jpg" class="subFreveiw_blog_prev_thumbnail_img">
                            </div>
                        </div>

                        <div class="subFreveiw_blog_prev_content">
                            <div class="subFreveiw_blog_prev_content_title"> Bonuses for New Hao's Special Works Race Series </div>
                            <div class="subFreveiw_blog_prev_content_date"> 19 March 2021 </div>
                            <div class="subFreveiw_blog_prev_content_text"> Grand Theft Auto Online weekly events are bigger than ever with the game's arrival on PlayStation ... </div>
                        </div>

                        <div class="subFreveiw_blog_prev_toolbar flexc">
                            <div class="subFreveiw_blog_prev_tool flexc"><i class="fal fa-pencil-alt"></i></div>
                            <div class="subFreveiw_blog_prev_tool flexc"><i class="fas fa-eye"></i></div>
                            <div class="subFreveiw_blog_prev_tool flexc"><i class="fas fa-chart-area"></i></div>
                            <div class="subFreveiw_blog_prev_tool flexc"><i class="fas fa-trash"></i></div>
                            <div class="subFreveiw_blog_prev_tool flexc"><i class="fal fa-ellipsis-v-alt"></i></div>
                        </div>


                    </div> -->

                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(() => {


        $.ajax({
            type: "POST",
            url: "./sdk/blog_fetcher_set.php"
        }).done((response) => {

            var time_ago = (time) => {

                switch (typeof time) {
                    case 'number':
                        break;
                    case 'string':
                        time = +new Date(time);
                        break;
                    case 'object':
                        if (time.constructor === Date) time = time.getTime();
                        break;
                    default:
                        time = +new Date();
                }
                var time_formats = [
                    [60, 'seconds', 1], // 60
                    [120, '1 minute ago', '1 minute from now'], // 60*2
                    [3600, 'minutes', 60], // 60*60, 60
                    [7200, '1 hour ago', '1 hour from now'], // 60*60*2
                    [86400, 'hours', 3600], // 60*60*24, 60*60
                    [172800, 'Yesterday', 'Tomorrow'], // 60*60*24*2
                    [604800, 'days', 86400], // 60*60*24*7, 60*60*24
                    [1209600, 'Last week', 'Next week'], // 60*60*24*7*4*2
                    [2419200, 'weeks', 604800], // 60*60*24*7*4, 60*60*24*7
                    [4838400, 'Last month', 'Next month'], // 60*60*24*7*4*2
                    [29030400, 'months', 2419200], // 60*60*24*7*4*12, 60*60*24*7*4
                    [58060800, 'Last year', 'Next year'], // 60*60*24*7*4*12*2
                    [2903040000, 'years', 29030400], // 60*60*24*7*4*12*100, 60*60*24*7*4*12
                    [5806080000, 'Last century', 'Next century'], // 60*60*24*7*4*12*100*2
                    [58060800000, 'centuries', 2903040000] // 60*60*24*7*4*12*100*20, 60*60*24*7*4*12*100
                ];
                var seconds = (+new Date() - time) / 1000,
                    token = 'ago',
                    list_choice = 1;

                if (seconds == 0) {
                    return 'Just now'
                }
                if (seconds < 0) {
                    seconds = Math.abs(seconds);
                    token = 'from now';
                    list_choice = 2;
                }
                var i = 0,
                    format;
                while (format = time_formats[i++])
                    if (seconds < format[0]) {
                        if (typeof format[2] == 'string')
                            return format[list_choice];
                        else
                            return Math.floor(seconds / format[2]) + ' ' + format[1] + ' ' + token;
                    }
                return time;
            }

            var dateToYMD = (date) => {
                var strArray = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                var blog_day = date.getDate();
                var blog_mon = strArray[parseInt(date.getMonth())];
                var blog_yr = date.getFullYear();

                // var blog_hr = date.getHours() % 12;
                // var blog_min = date.getMinutes();
                // var blog_sec = date.getSeconds();
                // var blog_ampm = blog_hr >= 12 ? 'pm' : 'am';


                return (blog_day <= 9 ? '0' + blog_day : blog_day) + ' ' + blog_mon + ' ' + blog_yr + " &#9679; " + time_ago(date.getTime())
            }


            var get_mini_img = (string) => {
                const imgRex = /<img[^>]+src="?([^"\s]+)"?\s*/gi;
                const images = [];
                let img;
                while ((img = imgRex.exec(string))) {
                    images.push(img[1]);
                }
                return images;
            }


            var strip_content_html = (html) => {
                var temporalDivElement = document.createElement("div") // Create a new div element
                temporalDivElement.innerHTML = html // Set the HTML content with the provide
                return temporalDivElement.textContent || temporalDivElement.innerText || "" // Retrieve the text property of the element (cross-browser support)
            }

            for (var i = 0; i < response.length; i++) {

                var blog_stat = response[i].blog_status

                // console.log(blog_stat)

                var blog_thumb_img = response[i].thumbnail_url
                var blog_mini_img = get_mini_img(response[i].content)

                var blog_title = response[i].title
                var blog_pubDate = dateToYMD(new Date(response[i].published_on))
                var blog_content = strip_content_html(response[i].content)

                if (blog_content.length >= 98) { //if file name length is greater than 14 then split it and add ...
                    blog_content = blog_content.substring(0, 98) + "..."
                }



                if (blog_mini_img.length == 0) {
                    var blog_thumb_img_css = "style='width:100%'"
                    var blog_mini_img_css = "style='display:none'"
                    var blog_miniImg_html = ""
                } else if (blog_mini_img.length == 1) {
                    var blog_thumb_img_css = "style='width:50%'"
                    var blog_mini_img_css = "style='display:flex'"
                    var blog_miniImg_html = '<img src="' + blog_mini_img[0] + '" class="published_blog_prev_mini_img" style="height: 100%">'
                } else {
                    var blog_miniImg_html = '<img src="' + blog_mini_img[0] + '" class="published_blog_prev_mini_img"><img src="' + blog_mini_img[1] + '" class="published_blog_prev_mini_img">'

                    if ((blog_mini_img.length - 2) > 0) {
                        var more_mini_img = ("<div class='more_blog_prev_mini_img flexc'>+" + (blog_mini_img.length - 2) + "</div>")
                    } else {
                        var more_mini_img = ""
                    }
                }

                if (blog_stat == "publish") {
                    $(".dashboard_blog_published_blog_prev_con").prepend(`<div class="dashboard_blog_published_blog_prev">
                        <div class="published_blog_prev_image_con flexc">
                            <div class="published_blog_prev_thumbnail_con" ` + blog_thumb_img_css + `>
                                <img src="./assests/blog_main_img/` + blog_thumb_img + `" class="published_blog_prev_thumbnail_img">
                            </div>
                            <div class="published_blog_prev_miniImg_con flexc" ` + blog_mini_img_css + `>` + blog_miniImg_html + more_mini_img + `</div>
                        </div>

                        <div class="published_blog_prev_content">
                            <div class="published_blog_prev_content_title"> ` + blog_title + ` </div>
                            <div class="published_blog_prev_content_date"> ` + blog_pubDate + ` </div>
                            <div class="published_blog_prev_content_text"> ` + blog_content + ` </div>
                        </div>

                        <div class="published_blog_prev_toolbar flexc">
                            <div class="published_blog_prev_tool flexc"><i class="fal fa-pencil-alt"></i></div>
                            <div class="published_blog_prev_tool flexc"><i class="fas fa-eye"></i></div>
                            <div class="published_blog_prev_tool flexc"><i class="fas fa-chart-area"></i></div>
                            <div class="published_blog_prev_tool flexc"><i class="fas fa-trash"></i></div>
                            <div class="published_blog_prev_tool flexc"><i class="fal fa-ellipsis-v-alt"></i></div>
                        </div>
                    </div>`)
                }


                if (blog_stat == "submit") {
                    $(".dashboard_blog_draft_blog_prev_con").prepend(`<div class="dashboard_blog_draft_blog_prev flexc">
                            <div class="dashboard_blog_draft_blog_prev_wrap flexc">
                                <div class="dashboard_blog_draft_blog_prev_thumbnail_con flexc">
                                    <img src="./assests/blog_main_img/` + blog_thumb_img + `" class="draft_blog_prev_thumbnail_img">
                                </div>
                                <div class="draft_blog_prev_content">
                                    <div class="draft_blog_prev_title">` + blog_title + `</div>
                                    <div class="draft_blog_prev_content_date">` + blog_pubDate + `</div>
                                    <div class="draft_blog_prev_content_text">` + blog_content + ` </div>
                                </div>
                            </div>


                            <div class="draft_blog_prev_toolbar flexc">
                                <div class="draft_blog_prev_tool flexc"><i class="fal fa-pencil-alt"></i></div>
                                <div class="draft_blog_prev_tool flexc"><i class="fas fa-eye"></i></div>
                                <div class="draft_blog_prev_tool flexc"><i class="fas fa-trash"></i></div>
                            </div>
                        </div>`)
                }


                if (blog_stat == "trash") {
                    $(".dashboard_blog_trash_blog_prev_con").prepend(`<div class="dashboard_blog_trash_blog_prev flexc">
                            <div class="dashboard_blog_trash_blog_prev_wrap flexc">
                                <div class="dashboard_blog_trash_blog_prev_thumbnail_con flexc">
                                    <img src="./assests/blog_main_img/` + blog_thumb_img + `" class="trash_blog_prev_thumbnail_img">
                                </div>
                                <div class="trash_blog_prev_content">
                                    <div class="trash_blog_prev_title">` + blog_title + `</div>
                                    <div class="trash_blog_prev_content_date">` + blog_pubDate + `</div>
                                    <div class="trash_blog_prev_content_text">` + blog_content + `</div>
                                </div>
                            </div>


                            <div class="trash_blog_prev_toolbar flexc">
                                <div class="trash_blog_prev_tool flexc"><i class='bx bx-revision'></i></div>
                                <div class="trash_blog_prev_tool flexc"><i class="fas fa-eye"></i></div>
                                <div class="trash_blog_prev_tool flexc"><i class="fas fa-trash"></i></div>
                            </div>
                        </div>`)
                }


                if (blog_stat == "reveiw") {
                    $(".dashboard_blog_subFreveiw_blog_prev_con").prepend(`<div class="dashboard_blog_subFreveiw_blog_prev">
                        <div class="subFreveiw_blog_prev_image_con flexc">
                            <div class="subFreveiw_blog_prev_thumbnail_con">
                                <img src="./assests/blog_main_img/` + blog_thumb_img + `" class="subFreveiw_blog_prev_thumbnail_img">
                            </div>
                        </div>

                        <div class="subFreveiw_blog_prev_content">
                            <div class="subFreveiw_blog_prev_content_title">` + blog_title + `</div>
                            <div class="subFreveiw_blog_prev_content_date">` + blog_pubDate + `</div>
                            <div class="subFreveiw_blog_prev_content_text">` + blog_content + `</div>
                        </div>

                        <div class="subFreveiw_blog_prev_toolbar flexc">
                            <div class="subFreveiw_blog_prev_tool flexc"><i class="fal fa-pencil-alt"></i></div>
                            <div class="subFreveiw_blog_prev_tool flexc"><i class="fas fa-eye"></i></div>
                            <div class="subFreveiw_blog_prev_tool flexc"><i class="fas fa-chart-area"></i></div>
                            <div class="subFreveiw_blog_prev_tool flexc"><i class="fas fa-trash"></i></div>
                            <div class="subFreveiw_blog_prev_tool flexc"><i class="fal fa-ellipsis-v-alt"></i></div>
                        </div>
                    </div>`)
                }


            }

            $('.dashboard_blog_draft_blog_prev_con').owlCarousel({
                // items: 3,
                // center: true,
                // loop: true,
                margin: 10,
                nav: true,
                navContainer: '.dashboard_blog_draft_blog_prev_conWrap',
                navText: ['<div class="blog_prev_con_previous_btn owl-left flexc"><i class="fal fa-chevron-left"></i></div>', '<div class="blog_prev_con_next_btn owl-right flexc"><i class="fal fa-chevron-right"></i></div>'],
                autoWidth: true,
                responsive: {
                    600: {
                        items: 2,
                    },
                    1000: {
                        items: 2,
                    }
                }
            })

            $('.dashboard_blog_trash_blog_prev_con').owlCarousel({
                // items: 3,
                // center: true,
                // loop: true,
                margin: 10,
                nav: true,
                navContainer: '.dashboard_blog_trash_blog_prev_conWrap',
                navText: ['<div class="blog_prev_con_previous_btn owl-left flexc"><i class="fal fa-chevron-left"></i></div>', '<div class="blog_prev_con_next_btn owl-right flexc"><i class="fal fa-chevron-right"></i></div>'],
                autoWidth: true,
                responsive: {
                    600: {
                        items: 2,
                    },
                    1000: {
                        items: 2,
                    }
                }
            })




        })
    });

</script>
